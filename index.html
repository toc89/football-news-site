<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Football News & Transfer Updates</title>
  <!-- You can remove this <link> if you don’t have an external styles.css,
       since we include all the CSS below inline. -->
  <!-- <link rel="stylesheet" href="styles.css" /> -->

  <style>
    /* ─── Basic page layout ─── */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f8f9fa;
    }
    header {
      background-color: #003366;
      color: #ffffff;
      padding: 1rem;
      text-align: center;
    }
    main {
      max-width: 800px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    section {
      margin-bottom: 2rem;
    }
    section h2 {
      color: #003366;
      border-bottom: 2px solid #003366;
      padding-bottom: 0.25rem;
      margin-bottom: 1rem;
    }

    /* ─── Article list styling ─── */
    ul.article-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    ul.article-list li {
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid #ddd;
    }
    ul.article-list li a {
      text-decoration: none;
      color: #003366;
      font-weight: bold;
      font-size: 1.1rem;
    }
    ul.article-list li a:hover {
      text-decoration: underline;
    }
    ul.article-list li .meta {
      font-size: 0.9rem;
      color: #555;
      margin-top: 0.25rem;
    }
    ul.article-list li p.description {
      margin-top: 0.5rem;
      color: #333;
    }

    /* ─── “Loading…” or “No articles found” text styling ─── */
    .placeholder {
      font-size: 1rem;
      color: #666;
    }
  </style>
</head>

<body>
  <header>
    <h1>Football News &amp; Transfer Updates</h1>
  </header>

  <main>
    <!-- ─── Latest General Football News Section ─── -->
    <section id="latest-news">
      <h2>Latest Football News</h2>
      <div id="latest-news-container">
        <p class="placeholder">Loading latest news…</p>
      </div>
    </section>

    <!-- ─── Football Transfer News Section ─── -->
    <section id="transfer-news">
      <h2>Football Transfer News</h2>
      <div id="transfer-news-container">
        <p class="placeholder">Loading transfer news…</p>
      </div>
    </section>
  </main>

  <!-- ─── Live‐News Fetch Script ─── -->
  <script>
    // ─── Your NewsAPI.org API key (already inserted) ───
    const API_KEY = 'a6220284e3c94b838f44314febdecfd2';

    /**
     * Renders an array of NewsAPI articles into the given container.
     * @param {Array} articles – array of { title, url, description, source: { name }, publishedAt, ... }
     * @param {string} containerId – ID of the <div> where we’ll insert the <ul> list
     */
    function renderArticles(articles, containerId) {
      const container = document.getElementById(containerId);
      container.innerHTML = ''; // Clear “Loading…” or previous content

      // If no articles were returned, show fallback text
      if (!articles || articles.length === 0) {
        container.innerHTML = '<p class="placeholder">No articles found.</p>';
        return;
      }

      // Create a <ul> with class "article-list"
      const list = document.createElement('ul');
      list.className = 'article-list';

      // Loop over each article and build an <li>
      articles.forEach((article) => {
        const li = document.createElement('li');

        // 1) Title as clickable link
        const a = document.createElement('a');
        a.href = article.url;
        a.target = '_blank';
        a.rel = 'noopener';
        a.textContent = article.title;
        li.appendChild(a);

        // 2) Meta info: source name + published date
        const meta = document.createElement('div');
        meta.className = 'meta';
        const publishedDate = new Date(article.publishedAt).toLocaleString();
        meta.textContent = `${article.source.name} • ${publishedDate}`;
        li.appendChild(meta);

        // 3) Short description (if available)
        if (article.description) {
          const desc = document.createElement('p');
          desc.className = 'description';
          desc.textContent = article.description;
          li.appendChild(desc);
        }

        list.appendChild(li);
      });

      container.appendChild(list);
    }

    /**
     * Fetches “general football news” from NewsAPI.org.
     * Returns a Promise that resolves to an array of article objects.
     */
    function fetchGeneralNews() {
      const url = new URL('https://newsapi.org/v2/everything');
      url.searchParams.set('q', 'football');
      url.searchParams.set('language', 'en');
      url.searchParams.set('pageSize', '10');         // Up to 10 articles
      url.searchParams.set('sortBy', 'publishedAt');  // Sort by newest
      url.searchParams.set('apiKey', API_KEY);

      return fetch(url.toString())
        .then((res) => {
          if (!res.ok) {
            throw new Error(`NewsAPI returned status ${res.status}`);
          }
          return res.json();
        })
        .then((json) => {
          if (json.status !== 'ok') {
            console.error('NewsAPI error payload:', json);
            return [];
          }
          return json.articles || [];
        })
        .catch((err) => {
          console.error('Error fetching general news:', err);
          return [];
        });
    }

    /**
     * Fetches “transfer” news by searching for "football transfer" or "transfer rumor".
     * Returns a Promise resolving to an array of article objects.
     */
    function fetchTransferNews() {
      const url = new URL('https://newsapi.org/v2/everything');
      url.searchParams.set('q', 'football transfer OR transfer rumor');
      url.searchParams.set('language', 'en');
      url.searchParams.set('pageSize', '10');
      url.searchParams.set('sortBy', 'publishedAt');
      url.searchParams.set('apiKey', API_KEY);

      return fetch(url.toString())
        .then((res) => {
          if (!res.ok) {
            throw new Error(`NewsAPI returned status ${res.status}`);
          }
          return res.json();
        })
        .then((json) => {
          if (json.status !== 'ok') {
            console.error('NewsAPI error payload:', json);
            return [];
          }
          return json.articles || [];
        })
        .catch((err) => {
          console.error('Error fetching transfer news:', err);
          return [];
        });
    }

    // Once the DOM is fully loaded, fetch & render both sets of news
    document.addEventListener('DOMContentLoaded', () => {
      // 1) General football news:
      fetchGeneralNews().then((articles) => {
        renderArticles(articles, 'latest-news-container');
      });

      // 2) Transfer-specific news:
      fetchTransferNews().then((articles) => {
        renderArticles(articles, 'transfer-news-container');
      });
    });
  </script>
  <!-- ─── End of script ─── -->

</body>
</html>

